// üîç Check if your API route looks like this:

// ‚ùå PROBLEM: Missing method handling
// pages/api/upload.ts or app/api/upload/route.ts
export default function handler(req, res) {
  // Only handles one method implicitly
  res.status(200).json({ message: 'Upload endpoint' });
}

// ‚úÖ SOLUTION: Proper method handling
// pages/api/upload.ts (Pages Router)
import { NextApiRequest, NextApiResponse } from 'next';

export default function handler(req: NextApiRequest, res: NextApiResponse) {
  const { method } = req;

  switch (method) {
    case 'POST':
      // Handle POST request for file upload
      try {
        // Your upload logic here
        res.status(200).json({ success: true, message: 'File uploaded' });
      } catch (error) {
        res.status(500).json({ error: 'Upload failed' });
      }
      break;
      
    case 'GET':
      // Handle GET request if needed
      res.status(200).json({ message: 'Upload endpoint info' });
      break;
      
    default:
      // Return 405 for unsupported methods
      res.setHeader('Allow', ['POST', 'GET']);
      res.status(405).end(`Method ${method} Not Allowed`);
  }
}

// ‚úÖ SOLUTION: App Router version
// app/api/upload/route.ts (App Router)
import { NextRequest, NextResponse } from 'next/server';

export async function POST(request: NextRequest) {
  try {
    // Handle POST request for file upload
    const formData = await request.formData();
    // Your upload logic here
    
    return NextResponse.json({ 
      success: true, 
      message: 'File uploaded' 
    });
  } catch (error) {
    return NextResponse.json(
      { error: 'Upload failed' }, 
      { status: 500 }
    );
  }
}

export async function GET(request: NextRequest) {
  // Handle GET request if needed
  return NextResponse.json({ 
    message: 'Upload endpoint info' 
  });
}

// ‚ùå PROBLEM: Wrong file structure
// If you have: pages/api/upload/index.ts
// But calling: /api/upload/documents
// This will cause 405 because the route doesn't exist

// ‚úÖ SOLUTION: Correct file structure
// For /api/upload/documents endpoint, create:
// pages/api/upload/documents.ts
// OR
// app/api/upload/documents/route.ts
